/*
 * Copyright (c) 2016-2019, The Tor Project, Inc. */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e.browser=e.browser||{},e.browser.extension=e.browser.extension||{},e.browser.extension.getBackgroundPage=e.browser.extension.getBackgroundPage||{}))}(this,function(e){"use strict";if("undefined"==typeof browser||Object.getPrototypeOf(browser)!==Object.prototype){const t="The `browser` object is not an ordinary object. We will not be able to polyfill `browser.extension.getBackgroundPage`.",r=e=>{try{return browser.runtime.getBackgroundPage()}catch(t){return e(t)}};e.getBackgroundPage=function(){return"function"!=typeof browser.runtime.getBackgroundPage?Promise.reject(new Error(t)):new Promise(r)},Object.defineProperty(e,"__esModule",{value:!0})}else{const t=e=>e,r=e=>e.then(t,t);e.getBackgroundPage=function(...e){return r(browser.extension.getBackgroundPage(...e))},Object.defineProperty(e,"__esModule",{value:!0})}});